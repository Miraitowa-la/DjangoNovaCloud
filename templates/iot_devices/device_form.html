{% extends 'base.html' %}

{% block title %}{% if form.instance.pk %}编辑设备{% else %}添加设备{% endif %} - NovaCloud{% endblock %}

{% block content %}
<div class="content-section">
    <div class="form-header">
        <h1>{% if form.instance.pk %}编辑设备{% else %}添加设备{% endif %}</h1>
    </div>
    
    <div class="form-container">
        <form method="post">
            {% csrf_token %}
            
            <div class="form-group">
                <label for="{{ form.device_id.id_for_label }}">设备号</label>
                {{ form.device_id }}
                {% if form.device_id.help_text %}
                    <small class="form-text text-muted">{{ form.device_id.help_text }}</small>
                {% endif %}
                {% if form.device_id.errors %}
                    <div class="field-error">{{ form.device_id.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="{{ form.device_identifier.id_for_label }}">设备标识</label>
                {{ form.device_identifier }}
                {% if form.device_identifier.help_text %}
                    <small class="form-text text-muted">{{ form.device_identifier.help_text }}</small>
                {% endif %}
                {% if form.device_identifier.errors %}
                    <div class="field-error">{{ form.device_identifier.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="{{ form.name.id_for_label }}">设备名称</label>
                {{ form.name }}
                {% if form.name.errors %}
                    <div class="field-error">{{ form.name.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="{{ form.project.id_for_label }}">所属项目</label>
                {{ form.project }}
                {% if form.project.errors %}
                    <div class="field-error">{{ form.project.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="{{ form.status.id_for_label }}">设备状态</label>
                {{ form.status }}
                {% if form.status.errors %}
                    <div class="field-error">{{ form.status.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-actions button-group">
                <button type="submit" class="btn btn-primary">保存</button>
                {% if view.kwargs.project_id %}
                    <a href="{% url 'iot_devices:project_detail' view.kwargs.project_id %}" class="btn btn-light">取消</a>
                {% else %}
                    <a href="javascript:history.back()" class="btn btn-light">取消</a>
                {% endif %}
            </div>
        </form>
    </div>
</div>
{% endblock %} 